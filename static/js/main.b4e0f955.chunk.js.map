{"version":3,"sources":["containers/utils.js","containers/config.js","containers/Vector2.js","containers/Game.js","components/Dot.jsx","components/MainUI.jsx","App.js","serviceWorker.js","index.js"],"names":["keyboard","value","key","isDown","isUp","press","undefined","release","downHandler","event","preventDefault","upHandler","downListener","bind","upListener","window","addEventListener","unsubscribe","removeEventListener","rectCollide","a","b","x1","x2","y1","y2","toRect","center","w","h","x","y","config","appw","apph","pikaw","pikah","ballw","ballh","ground","poleTop","Vector2","this","Object","defineProperties","prototype","width","get","set","height","assign","isVector2","setScalar","scalar","setX","setY","setComponent","index","Error","getComponent","clone","constructor","copy","v","add","console","warn","addVectors","addScalar","s","addScaledVector","sub","subVectors","subScalar","multiply","multiplyScalar","divide","divideScalar","applyMatrix3","m","e","elements","min","Math","max","clamp","clampScalar","minVal","maxVal","clampLength","length","floor","ceil","round","roundToZero","negate","dot","cross","lengthSq","sqrt","manhattanLength","abs","normalize","angle","atan2","PI","distanceTo","distanceToSquared","dx","dy","manhattanDistanceTo","setLength","lerp","alpha","lerpVectors","v1","v2","equals","fromArray","array","offset","toArray","fromBufferAttribute","attribute","getX","getY","rotateAround","c","cos","sin","Game","props","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","setScore","data","score","i","scoreSprite","texture","PIXI","shared","resources","spritesheet","textures","concat","player","pika","visible","pikas","pika2","other","gotoAndPlay","resetPos","pos","vx","vy","ay","ball","cfg","ax","updatePixiRoot","element","pixiRoot","children","appendChild","state","app","view","setup","load","onAssetsLoaded","left","right","up","loader","animations","screen","bg","bg00","stage","addChild","bg01a","bg01b","bg01c","bg02","bg03","bg04","bg07","bg08","forEach","p1","p2","scale","animationSpeed","play","loop","digit0","ticker","delta","gameLoop","socket","emit","_this$pos","pole_ball","newVel","pikaRect","pika2Rect","ballRect","vec","resolution","innerWidth","innerHeight","setupGame","reset","react_default","createElement","className","id","ref","React","Component","Dot","_ref","color","style","backgroundColor","MainUI","_props$functions","functions","connectSocket","setUrl","sendMessage","setRoom","setName","enterRoom","leaveRoom","randomRoom","connected","inroom","room","name","connVal","connClick","disconnect","type","onChange","target","defaultValue","url","onClick","placeholder","App","initSocket","on","setState","log","reason","connect","error","timeout","close","attemptNumber","message","gamemode","io","text","prevProps","prevState","snapshot","includes","containers_Game","components_MainUI","Boolean","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.b4e0f955.chunk.js","sourcesContent":["export function keyboard(value) {\n  let key = {};\n  key.value = value;\n  key.isDown = false;\n  key.isUp = true;\n  key.press = undefined;\n  key.release = undefined;\n  //The `downHandler`\n  key.downHandler = event => {\n    if (event.key === key.value) {\n      if (key.isUp && key.press) key.press();\n      key.isDown = true;\n      key.isUp = false;\n      event.preventDefault();\n    }\n  };\n\n  //The `upHandler`\n  key.upHandler = event => {\n    if (event.key === key.value) {\n      if (key.isDown && key.release) key.release();\n      key.isDown = false;\n      key.isUp = true;\n      event.preventDefault();\n    }\n  };\n\n  //Attach event listeners\n  const downListener = key.downHandler.bind(key);\n  const upListener = key.upHandler.bind(key);\n\n  window.addEventListener(\n    \"keydown\", downListener, false\n  );\n  window.addEventListener(\n    \"keyup\", upListener, false\n  );\n\n  // Detach event listeners\n  key.unsubscribe = () => {\n    window.removeEventListener(\"keydown\", downListener);\n    window.removeEventListener(\"keyup\", upListener);\n  };\n\n  return key;\n}\nexport function rectCollide(a, b) {\n  return !(a.x1>b.x2 || a.x2<b.x1 || a.y1>b.y2 || a.y2<b.y1);\n}\nexport function toRect(center, w, h) {\n  return {x1: center.x-w/2, x2: center.x+w/2, y1: center.y-h/2, y2: center.y+h/2};\n}\n","export default {\n  appw : 432,\n  apph : 304,\n  pikaw : 64,\n  pikah : 64,\n  ballw : 40,\n  ballh : 40,\n  ground: 264,\n  poleTop: 156,\n}\n","// copy from three.js\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author philogb / http://blog.thejit.org/\n * @author egraether / http://egraether.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nfunction Vector2( x, y ) {\n\n  this.x = x || 0;\n  this.y = y || 0;\n\n}\n\nObject.defineProperties( Vector2.prototype, {\n\n  \"width\": {\n\n    get: function () {\n\n      return this.x;\n\n    },\n\n    set: function ( value ) {\n\n      this.x = value;\n\n    }\n\n  },\n\n  \"height\": {\n\n    get: function () {\n\n      return this.y;\n\n    },\n\n    set: function ( value ) {\n\n      this.y = value;\n\n    }\n\n  }\n\n} );\n\nObject.assign( Vector2.prototype, {\n\n  isVector2: true,\n\n  set: function ( x, y ) {\n\n    this.x = x;\n    this.y = y;\n\n    return this;\n\n  },\n\n  setScalar: function ( scalar ) {\n\n    this.x = scalar;\n    this.y = scalar;\n\n    return this;\n\n  },\n\n  setX: function ( x ) {\n\n    this.x = x;\n\n    return this;\n\n  },\n\n  setY: function ( y ) {\n\n    this.y = y;\n\n    return this;\n\n  },\n\n  setComponent: function ( index, value ) {\n\n    switch ( index ) {\n\n      case 0: this.x = value; break;\n      case 1: this.y = value; break;\n      default: throw new Error( 'index is out of range: ' + index );\n\n    }\n\n    return this;\n\n  },\n\n  getComponent: function ( index ) {\n\n    switch ( index ) {\n\n      case 0: return this.x;\n      case 1: return this.y;\n      default: throw new Error( 'index is out of range: ' + index );\n\n    }\n\n  },\n\n  clone: function () {\n\n    return new this.constructor( this.x, this.y );\n\n  },\n\n  copy: function ( v ) {\n\n    this.x = v.x;\n    this.y = v.y;\n\n    return this;\n\n  },\n\n  add: function ( v, w ) {\n\n    if ( w !== undefined ) {\n\n      console.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n      return this.addVectors( v, w );\n\n    }\n\n    this.x += v.x;\n    this.y += v.y;\n\n    return this;\n\n  },\n\n  addScalar: function ( s ) {\n\n    this.x += s;\n    this.y += s;\n\n    return this;\n\n  },\n\n  addVectors: function ( a, b ) {\n\n    this.x = a.x + b.x;\n    this.y = a.y + b.y;\n\n    return this;\n\n  },\n\n  addScaledVector: function ( v, s ) {\n\n    this.x += v.x * s;\n    this.y += v.y * s;\n\n    return this;\n\n  },\n\n  sub: function ( v, w ) {\n\n    if ( w !== undefined ) {\n\n      console.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n      return this.subVectors( v, w );\n\n    }\n\n    this.x -= v.x;\n    this.y -= v.y;\n\n    return this;\n\n  },\n\n  subScalar: function ( s ) {\n\n    this.x -= s;\n    this.y -= s;\n\n    return this;\n\n  },\n\n  subVectors: function ( a, b ) {\n\n    this.x = a.x - b.x;\n    this.y = a.y - b.y;\n\n    return this;\n\n  },\n\n  multiply: function ( v ) {\n\n    this.x *= v.x;\n    this.y *= v.y;\n\n    return this;\n\n  },\n\n  multiplyScalar: function ( scalar ) {\n\n    this.x *= scalar;\n    this.y *= scalar;\n\n    return this;\n\n  },\n\n  divide: function ( v ) {\n\n    this.x /= v.x;\n    this.y /= v.y;\n\n    return this;\n\n  },\n\n  divideScalar: function ( scalar ) {\n\n    return this.multiplyScalar( 1 / scalar );\n\n  },\n\n  applyMatrix3: function ( m ) {\n\n    var x = this.x, y = this.y;\n    var e = m.elements;\n\n    this.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n    this.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n    return this;\n\n  },\n\n  min: function ( v ) {\n\n    this.x = Math.min( this.x, v.x );\n    this.y = Math.min( this.y, v.y );\n\n    return this;\n\n  },\n\n  max: function ( v ) {\n\n    this.x = Math.max( this.x, v.x );\n    this.y = Math.max( this.y, v.y );\n\n    return this;\n\n  },\n\n  clamp: function ( min, max ) {\n\n    // assumes min < max, componentwise\n\n    this.x = Math.max( min.x, Math.min( max.x, this.x ) );\n    this.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n    return this;\n\n  },\n\n  clampScalar: function ( minVal, maxVal ) {\n\n    this.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n    this.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n    return this;\n\n  },\n\n  clampLength: function ( min, max ) {\n\n    var length = this.length();\n\n    return this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n  },\n\n  floor: function () {\n\n    this.x = Math.floor( this.x );\n    this.y = Math.floor( this.y );\n\n    return this;\n\n  },\n\n  ceil: function () {\n\n    this.x = Math.ceil( this.x );\n    this.y = Math.ceil( this.y );\n\n    return this;\n\n  },\n\n  round: function () {\n\n    this.x = Math.round( this.x );\n    this.y = Math.round( this.y );\n\n    return this;\n\n  },\n\n  roundToZero: function () {\n\n    this.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n    this.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n    return this;\n\n  },\n\n  negate: function () {\n\n    this.x = - this.x;\n    this.y = - this.y;\n\n    return this;\n\n  },\n\n  dot: function ( v ) {\n\n    return this.x * v.x + this.y * v.y;\n\n  },\n\n  cross: function ( v ) {\n\n    return this.x * v.y - this.y * v.x;\n\n  },\n\n  lengthSq: function () {\n\n    return this.x * this.x + this.y * this.y;\n\n  },\n\n  length: function () {\n\n    return Math.sqrt( this.x * this.x + this.y * this.y );\n\n  },\n\n  manhattanLength: function () {\n\n    return Math.abs( this.x ) + Math.abs( this.y );\n\n  },\n\n  normalize: function () {\n\n    return this.divideScalar( this.length() || 1 );\n\n  },\n\n  angle: function () {\n\n    // computes the angle in radians with respect to the positive x-axis\n\n    var angle = Math.atan2( this.y, this.x );\n\n    if ( angle < 0 ) angle += 2 * Math.PI;\n\n    return angle;\n\n  },\n\n  distanceTo: function ( v ) {\n\n    return Math.sqrt( this.distanceToSquared( v ) );\n\n  },\n\n  distanceToSquared: function ( v ) {\n\n    var dx = this.x - v.x, dy = this.y - v.y;\n    return dx * dx + dy * dy;\n\n  },\n\n  manhattanDistanceTo: function ( v ) {\n\n    return Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n  },\n\n  setLength: function ( length ) {\n\n    return this.normalize().multiplyScalar( length );\n\n  },\n\n  lerp: function ( v, alpha ) {\n\n    this.x += ( v.x - this.x ) * alpha;\n    this.y += ( v.y - this.y ) * alpha;\n\n    return this;\n\n  },\n\n  lerpVectors: function ( v1, v2, alpha ) {\n\n    return this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n  },\n\n  equals: function ( v ) {\n\n    return ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n  },\n\n  fromArray: function ( array, offset ) {\n\n    if ( offset === undefined ) offset = 0;\n\n    this.x = array[ offset ];\n    this.y = array[ offset + 1 ];\n\n    return this;\n\n  },\n\n  toArray: function ( array, offset ) {\n\n    if ( array === undefined ) array = [];\n    if ( offset === undefined ) offset = 0;\n\n    array[ offset ] = this.x;\n    array[ offset + 1 ] = this.y;\n\n    return array;\n\n  },\n\n  fromBufferAttribute: function ( attribute, index, offset ) {\n\n    if ( offset !== undefined ) {\n\n      console.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n    }\n\n    this.x = attribute.getX( index );\n    this.y = attribute.getY( index );\n\n    return this;\n\n  },\n\n  rotateAround: function ( center, angle ) {\n\n    var c = Math.cos( angle ), s = Math.sin( angle );\n\n    var x = this.x - center.x;\n    var y = this.y - center.y;\n\n    this.x = x * c - y * s + center.x;\n    this.y = x * s + y * c + center.y;\n\n    return this;\n\n  }\n\n} );\n\n\nexport { Vector2 };\n","import React from 'react';\nimport * as PIXI from \"pixi.js\";\nimport { keyboard, toRect, rectCollide } from './utils.js'\nimport cfg from './config.js'\nimport { Vector2 } from './Vector2.js'\n\n// Thanks to https://medium.com/@peeyush.pathak18/pixijs-with-react-3cd40738180\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    this.pixiRoot = null;\n    let resolution = Math.min((window.innerWidth-200)/432, (window.innerHeight-200)/304);\n    this.state = {\n      app: new PIXI.Application({width: 432, height: 304, resolution: resolution})\n    };\n    this.pos = {};\n    this.resetPos(this.pos);\n    this.score = [0, 0];\n    this.scoreSprite = [null, null];\n    this.props.setupGame(this.pos, this.resetPos, this.setScore);\n  }\n\n  componentWillUnmount() {\n    PIXI.Loader.shared.reset();\n  }\n\n  setScore = (data) => {\n    this.score = data;\n    for (let i=0; i<2; i++) {\n      this.scoreSprite[i].texture = PIXI.Loader.shared.resources.spritesheet.textures[`digit${this.score[i]}`];\n    }\n    if (data[0]===9||data[1]===9) {\n      if ((this.props.player === 'online-player1' && data[0] === 9) ||\n        (this.props.player === 'online-player2' && data[1] === 9)) {\n        this.pika.visible = false;\n        this.pika = this.pikas['pika_win'];\n        this.pika.visible = true;\n        this.pika2.visible = false;\n        this.pika2 = this.pikas['pika_lose'].other;\n        this.pika2.visible = true;\n        this.pika.gotoAndPlay(0);\n        this.pika2.gotoAndPlay(0);\n      } else {\n        this.pika.visible = false;\n        this.pika = this.pikas['pika_lose'];\n        this.pika.visible = true;\n        this.pika2.visible = false;\n        this.pika2 = this.pikas['pika_win'].other;\n        this.pika2.visible = true;\n        this.pika.gotoAndPlay(0);\n        this.pika2.gotoAndPlay(0);\n      }\n    }\n  }\n  resetPos = (pos) => {\n    pos.pika = {x: this.props.player === 'online-player1' ? 36: 394, y: 232, vx: 0, vy: 0, ay: .8};\n    pos.pika2 = {x: this.props.player === 'online-player2' ? 36: 394, y: 232};\n    pos.ball = {x: 36, y: cfg.ballh/2, vx: 0, vy: 0, ax: 0, ay: .3};\n  }\n  updatePixiRoot = (element) => {\n    // the element is the DOM object that we will use as container to add pixi stage(canvas)\n    this.pixiRoot = element;\n\n    //now we are adding the application to the DOM element which we got from the Ref.\n    if (this.pixiRoot && this.pixiRoot.children.length <= 0) {\n      this.pixiRoot.appendChild(this.state.app.view);\n\n      //The setup function is a custom function that we created to add the sprites. We will this below\n      this.setup();\n    }\n  };\n  setup = () => {\n    PIXI.Loader.shared\n      .add('spritesheet', 'assets/spritesheet.json')\n      .load(this.onAssetsLoaded);\n    this.left = 0;\n    this.right = 0;\n    let left = keyboard(\"ArrowLeft\");\n    let up = keyboard(\"ArrowUp\");\n    let right = keyboard(\"ArrowRight\");\n    let down = keyboard(\"ArrowDown\");\n    left.press = () => {\n      this.left = -1;\n      this.pos.pika.vx = this.left + this.right;\n    }\n    left.release = () => {\n      this.left = 0;\n      this.pos.pika.vx = this.left + this.right;\n    }\n    right.press = () => {\n      this.right = 1;\n      this.pos.pika.vx = this.left + this.right;\n    }\n    right.release = () => {\n      this.right = 0;\n      this.pos.pika.vx = this.left + this.right;\n    }\n    up.press = () => {\n      this.pika.visible = false;\n      this.pika = this.pikas[\"pika_jump\"];\n      if (this.pos.pika.y >= cfg.ground-cfg.pikah/2)\n        this.pos.pika.vy = -16;\n      this.pika.visible = true;\n    }\n    up.release = () => {\n      this.pika.visible = false;\n      this.pika = this.pikas[\"pika_walk\"];\n      this.pika.visible = true;\n    }\n  }\n\n  onAssetsLoaded = (loader, resources) => {\n    // We will create a sprite and then add it to stage and (0,0) position\n    const textures = resources.spritesheet.textures;\n    const animations = resources.spritesheet.spritesheet.animations;\n    const app = this.state.app;\n    const pikas = [\"pika_walk\", \"pika_jump\", \"pika_attack\", \"pika_dive\", \"pika_win\", \"pika_lose\"];\n    this.pikas = {};\n    const width = app.screen.width;\n    const height = app.screen.height;\n\n    // background\n    let bg = new PIXI.TilingSprite(textures.bg00, width, 32);\n    bg.y = height - 16*2;\n    app.stage.addChild(bg);\n    const left = new PIXI.Sprite(textures.bg01a);\n    left.y = height - 16*3;\n    app.stage.addChild(left);\n    bg = new PIXI.TilingSprite(textures.bg01b, width-32, 16);\n    bg.y = height - 16*3;\n    bg.x = 16;\n    app.stage.addChild(bg);\n    const right = new PIXI.Sprite(textures.bg01c);\n    right.y = height - 16*3;\n    right.x = 16*26;\n    app.stage.addChild(right);\n    bg = new PIXI.TilingSprite(textures.bg02, app.screen.width, 16);\n    bg.y = height - 16*4;\n    app.stage.addChild(bg);\n    bg = new PIXI.Sprite(textures.bg03);\n    bg.y = height - 16*4 -72;\n    app.stage.addChild(bg);\n    bg = new PIXI.TilingSprite(textures.bg04, width, height - 16*4 -72);\n    app.stage.addChild(bg);\n    bg = new PIXI.Sprite(textures.bg07);\n    bg.x = cfg.appw/2-4;\n    bg.y = 156;\n    app.stage.addChild(bg);\n    bg = new PIXI.TilingSprite(textures.bg08, 8, 13.5*8);\n    bg.x = cfg.appw/2-4;\n    bg.y = 164;\n    app.stage.addChild(bg);\n\n    pikas.forEach(i => {\n      let p1 = new PIXI.AnimatedSprite(animations[i]);\n      let p2 = new PIXI.AnimatedSprite(animations[i]);\n      p2.scale.x = -1;\n      p1.animationSpeed = 0.3;\n      p2.animationSpeed = 0.3;\n      p1.play();\n      p2.play();\n      p1.visible = false;\n      p2.visible = false;\n      if (i === 'pika_win' || i === 'pika_lose') {\n        p1.loop = false;\n        p2.loop = false;\n        p1.animationSpeed = 0.05;\n        p2.animationSpeed = 0.05;\n      }\n      app.stage.addChild(p1);\n      app.stage.addChild(p2);\n      if (this.props.player === 'online-player1') {\n        this.pikas[i] = p1;\n        this.pikas[i].other = p2;\n      } else {\n        this.pikas[i] = p2;\n        this.pikas[i].other = p1;\n      }\n    });\n    this.pika = this.pikas['pika_walk'];\n    this.pika.visible = true;\n    this.pika2 = this.pikas['pika_walk'].other;\n    this.pika2.visible = true;\n\n    this.ball = new PIXI.AnimatedSprite(animations['ball']);\n    this.ball.animationSpeed = 0.1;\n    this.ball.play();\n    app.stage.addChild(this.ball)\n\n    for (let i=0; i<2; i++) {\n      this.scoreSprite[i] = new PIXI.Sprite(textures.digit0);\n      this.scoreSprite[i].x = 56 +i*288;\n      this.scoreSprite[i].y = 12;\n      app.stage.addChild(this.scoreSprite[i]);\n    }\n\n    app.ticker.add(delta => this.gameLoop(delta));\n    this.props.socket.emit('round-start');\n  };\n\n  gameLoop = () => {\n    let {pika, pika2, ball} = this.pos;\n    pika.x += pika.vx*3.5;\n    pika.vy += pika.ay;\n    pika.y += pika.vy;\n    if (pika.y > cfg.ground-cfg.pikah/2)\n      pika.y = cfg.ground-cfg.pikah/2;\n    if (this.props.player === 'online-player1') {\n      if (pika.x < cfg.pikaw/2)\n        pika.x = cfg.pikaw/2;\n      else if (pika.x > cfg.appw/2-cfg.pikaw/2)\n        pika.x = cfg.appw/2-cfg.pikaw/2;\n      ball.vx += ball.ax;\n      ball.vy += ball.ay;\n      ball.x += ball.vx;\n      ball.y += ball.vy;\n      if (ball.x < cfg.ballw/2) {\n        ball.vx *= -.9;\n        ball.x = cfg.ballw/2;\n      } else if (ball.x > cfg.appw-cfg.ballw/2) {\n        ball.vx *= -.9;\n        ball.x = cfg.appw-cfg.ballw/2;\n      }\n      if (ball.y < cfg.ballh/2) {\n        ball.vy *= -.9;\n        ball.y = cfg.ballh/2;\n      } else if (ball.y > cfg.ground-cfg.ballh/2) {\n        ball.vy *= -.9;\n        ball.y = cfg.ground-cfg.ballh/2;\n        if (!(this.score[0]===9 || this.score[1]===9)) {\n          if (ball.x < cfg.appw/2)\n            this.score[1]++;\n          else\n            this.score[0]++;\n          this.setScore(this.score);\n          this.props.socket.emit('score', this.score);\n          this.props.socket.emit('round-end');\n          if (!(this.score[0]===9 || this.score[1]===9)) {\n            this.resetPos(this.pos);\n            this.props.socket.emit('round-start');\n          }\n        }\n      }\n      let pole_ball = new Vector2(ball.x-cfg.appw, ball.y-cfg.poleTop);\n      if (pole_ball.length < cfg.ballw/2 && ball.y < cfg.poleTop) {\n        let ballVel = new Vector2(ball.vx, ball.vy);\n        let newVel = ballVel.length * pole_ball.normalize();\n        ball.vx = newVel.x;\n        ball.vy = newVel.y;\n      }\n      else if (ball.y+cfg.ballh/2 > cfg.poleTop) {\n        if (ball.x+cfg.ballw/2 > cfg.appw/2 && ball.x < cfg.appw/2) {\n          ball.x = cfg.appw/2-cfg.ballw/2;\n          ball.vx *= -1;\n        } else if (ball.x-cfg.ballw/2 < cfg.appw/2 && ball.x > cfg.appw/2) {\n          ball.x = cfg.appw/2+cfg.ballw/2;\n          ball.vx *= -1;\n        }\n      }\n      let pikaRect = toRect(pika, cfg.pikaw, cfg.pikah);\n      let pika2Rect = toRect(pika2, cfg.pikaw, cfg.pikah);\n      let ballRect = toRect(ball, cfg.ballw, cfg.ballh);\n      if (rectCollide(pikaRect, ballRect) || rectCollide(pika2Rect, ballRect)) {\n        let vec = rectCollide(pikaRect, ballRect) ?\n          new Vector2(ball.x-pika.x, ball.y-pika.y) : new Vector2(ball.x-pika2.x, ball.y-pika2.y);\n        vec.normalize().multiplyScalar(10);\n        ball.vx = vec.x;\n        ball.vy = vec.y;\n      }\n    }\n    else if (this.props.player === 'online-player2') {\n      if (pika.x < cfg.appw/2+cfg.pikaw/2)\n        pika.x = cfg.appw/2+cfg.pikaw/2;\n      else if (pika.x > cfg.appw-cfg.pikaw/2)\n        pika.x = cfg.appw-cfg.pikaw/2;\n    }\n    this.pika.x = pika.x;\n    this.pika.y = pika.y;\n    this.pika2.x = pika2.x;\n    this.pika2.y = pika2.y;\n    this.ball.x = ball.x;\n    this.ball.y = ball.y\n    if (this.props.player === 'online-player2') {\n      this.props.socket.emit('room', {x: pika.x, y: pika.y});\n    } else if (this.props.player === 'online-player1') {\n      this.props.socket.emit('room', {pika2: pika, ball: ball});\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"game-page\">\n        <div id=\"pixi-game\" ref={this.updatePixiRoot} />\n      </div>\n      );\n  }\n}\nexport default Game;\n","import React from 'react';\nexport default ({color}) => {\n  return <span className=\"dot\" style={ {'backgroundColor' : color} } ></span>;\n}\n","import React from 'react';\nimport Dot from './Dot.jsx';\n\nfunction MainUI(props) {\n    const {connectSocket, sendMessage, setUrl, setRoom, setName, enterRoom, leaveRoom, randomRoom } = props.functions;\n    const { socket, connected, inroom, room, name } = props;\n    let color = 'grey';\n    if (socket) {\n      color = 'yellow';\n      if (connected)\n        color = 'green';\n    }\n    const connVal = socket? '離線': '多人連線';\n    const connClick = socket? props.functions.disconnect: connectSocket;\n    return (\n      <div className=\"main-ui\">\n        <div>\n          <Dot color={color}/>\n          <input type='url' onChange={ e => setUrl(e.target.value) } defaultValue={props.url}/>\n          <input type='button' value={connVal} onClick={ connClick } />\n          { /*<input type='button' value='送出訊息' onClick={sendMessage} /> */ }\n        </div>\n        { connected ? (inroom? showRoom(): inputRoom()) : undefined }\n      </div>\n    );\n    function inputRoom() {\n      return <div>\n        <input type='text' onChange={ e => setRoom(e.target.value) } placeholder='房號' defaultValue={room} />\n        <input type='text' onChange={ e => setName(e.target.value) } placeholder='暱稱' defaultValue={name} />\n        <input type='button' value='進入房間' onClick={enterRoom} />\n        <input type='button' value='隨機配對' onClick={randomRoom} />\n      </div>;\n    }\n    function showRoom() {\n      return <div>\n        <span>房號: { room }, 玩家: { name }</span>\n        <button onClick={leaveRoom} >離開房間</button>\n      </div>;\n    }\n}\nexport default MainUI;\n","import React, { Component } from 'react';\nimport './App.css';\nimport Game from './containers/Game';\nimport MainUI from './components/MainUI';\nimport io from 'socket.io-client'\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {socket: null, connected: false, gamemode: 'none', inroom: false, room: undefined, name: 'Anonymous'};\n    this.url = 'http://home.ntuosc.org:4001';\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    console.log(\"Component update\");\n    if (prevState.socket === null && this.state.socket) {\n      this.initSocket();\n    }\n  }\n\n  initSocket = () => {\n    let socket = this.state.socket;\n    socket.on('connect', () => {\n      this.setState({connected: true});\n      console.log('connect');\n    });\n    socket.on('disconnect', (reason) => {\n      console.log('disconnect: ' + reason);\n      if (!(reason === 'io client disconnect'))\n        this.setState({connected: false});\n      if (reason === 'io server disconnect') {\n        // the disconnection was initiated by the server, you need to reconnect manually\n        socket.connect();\n      }\n      // else the socket will automatically try to reconnect\n    });\n    socket.on('connect_error', (error) => {\n      console.log(\"connect_error: \" + error);\n    });\n    socket.on('connect_timeout', (timeout) => {\n      console.log(\"connect_timeout: \" + timeout);\n      socket.close();\n    });\n    socket.on('error', (error) => {\n      console.log(\"error: \" + error);\n    });\n    socket.on('reconnecting', (attemptNumber) => {\n      console.log('reconnecting: ' + attemptNumber);\n    });\n    socket.on('reconnect_failed', () => {\n      console.log('reconnect_failed');\n    });\n\n    // Custom situation\n    socket.on('getMessage', message => {\n      console.log(message)\n    });\n    socket.on('addRoom', message => {\n      this.setState({inroom: true});\n      console.log(message)\n    });\n    socket.on('leaveRoom', message => {\n      console.log(message)\n      this.setState({gamemode: 'none', inroom: false});\n    });\n    socket.on('loadGame', message => {\n      this.setState({'gamemode': message});\n    });\n    socket.on('room', data => {\n      if (this.state.gamemode === 'online-player1') {\n        this.pos.pika2 = data;\n      } else if (this.state.gamemode === 'online-player2') {\n        this.pos.pika2 = data.pika2;\n        this.pos.ball = data.ball;\n      }\n    });\n    socket.on('score', data => {\n      this.setScore(data);\n    });\n    socket.on('round-start', () => {\n      this.resetPos(this.pos);\n    });\n  }\n\n  setupGame =  (pos, resetPos, setScore) => {\n    this.pos = pos;\n    this.resetPos = resetPos;\n    this.setScore = setScore;\n  }\n  functions = {\n    connectSocket: () => {\n      this.setState((state) => {\n        if (state.socket === null)\n          return {socket: io(this.url)};\n        else {\n          state.socket.disconnect();\n          return {socket: io(this.url)};\n        }\n      });\n    },\n    disconnect: () => {\n      this.setState(state => {\n        if (state.socket) {\n          state.socket.disconnect();\n          return {socket: null, connected: false, inroom: false};\n        }\n        return {};\n      });\n    },\n    sendMessage: () => {\n      //以 emit 送訊息，並以 getMessage 為名稱送給 server 捕捉\n      this.state.socket.emit('getMessage', '只回傳給發送訊息的 client')\n    },\n    setUrl: (url) => {\n      this.url = url;\n    },\n    setRoom: (text) => {\n      this.setState({room: text});\n    },\n    enterRoom: () => {\n      if (this.state.socket) {\n        this.state.socket.emit('addRoom', {'room': this.state.room, 'player': this.state.name});\n      }\n    },\n    leaveRoom: () => {\n      if (this.state.socket) {\n        this.state.socket.emit('leaveRoom');\n      }\n    },\n    setName: (text) => {\n      this.setState({name: text});\n    },\n    randomRoom: () => {\n      if (this.state.socket) {\n        this.state.socket.emit('randomRoom', this.state.name);\n      }\n    }\n  }\n  render() {\n    if (this.state.gamemode.includes('online-player')) {\n      return <div>\n        <Game player={this.state.gamemode} socket={this.state.socket} setupGame={this.setupGame} />\n        <button onClick={ this.functions.leaveRoom } >離開</button>\n      </div>;\n    } else {\n      return <MainUI functions={ this.functions } socket={this.state.socket} connected={this.state.connected} inroom={this.state.inroom}\n        room={this.state.room} name={this.state.name} url={this.url} />;\n    }\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}